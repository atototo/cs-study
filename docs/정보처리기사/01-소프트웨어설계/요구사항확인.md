# 요구사항 확인
## 현행 시스템 분석 

## 요구 사항 확인
### 미들웨어 종류 
#### 1)RPC (Remote Procedure Call)
- 클라이언트가 원격에서 동적하는 프로시저를 호출하는 시스템(체계)
 - ** 정처기 책 표현 "시스템" = 소프트웨어적 체계/방식**
- 쉽게 풀어 다른 서버에 있는 함수를 내 로컬 함수처럼 호출 하는 것
- 핵심 포인트 
    - 네트워크 통신을 숨겨줌 (개발자는 그냥 함수 호출처럼 씀)
    - 동기 방식 (호출하면 결과 올 때까지 대기)
    - 대표 구현 기술 : gRPC, XML-RPC, JSON-RPC

```
// 마치 로컬 함수 호출 하는 것처럼 사용
const result = getUserInfo(userId); // 로컬 함수 호출

// 실제로는 네트워크 건너 다른 서버에서 실행
[내 서버] --네트워크--> [다른 서버에서 getUserInfo 실행] --결과 반환-->
```

#### RPC 구현 방식 비교

| | JSON-RPC | gRPC |
|--|----------|------|
| 포맷 | JSON (텍스트) | Protobuf (바이너리) |
| 속도 | 상대적 느림 | 빠름 |
| 가독성 | 좋음 (사람이 읽기 쉬움) | 나쁨 |
| 용도 | 간단한 API | MSA 서버 간 통신 |

#### 💡 실무 연결: MCP, Tool Call

Claude의 **MCP(Model Context Protocol)**도 JSON-RPC 2.0 기반!

```json
// MCP 요청 예시
{
  "jsonrpc": "2.0",
  "method": "tools/call",
  "params": {
    "name": "read_file",
    "arguments": { "path": "/some/file.txt" }
  },
  "id": 1
}
```

> 결국 **RPC = 함수명 + 파라미터 보내고 → 결과 받기**
> 이 개념을 알면 MCP, OpenAI Function Calling, Claude Tool Use 다 같은 맥락으로 이해됨

#### 2)MOM (Message Oriented Middleware)
- 분산 응용 프로그램 간에 메시지를 보내고 받으면서 데이터를 전달하고 교환할 수 있게 해 주는 미들웨어
- 메세지 지향 미들어로 
- 쉽게 말해 메시지 큐에 넣어두고 나중에 처리 하는 것
- 비동기 방식 (메시지 큐에 넣고 나중에 처리)
- 핵심 포인트
 - 비동기 방식 : 보내고 기다리지 않음
 - 메시지 큐 : 중간에 저장소가 있음
 - 송신자/수신자가 동시에 안 떠있어도 됨
 - 대표 예시 : Kafka, RabbitMQ, AWS SQS

```
  // RPC (동기) - 전화 통화
  [나] --전화--> [상대방] "지금 당장 대답해!"
       <--응답--

  // MOM (비동기) - 카톡 메시지
  [나] --메시지--> [큐(카톡서버)] --> [상대방이 나중에 읽음]
  "일단 보내고 난 내 할일 함"
```
#### 💡 실무 연결
 - 주문 들어오면 → 큐에 넣고 → 나중에 배치로 처리
 - 로그 수집 → Kafka로 쌓고 → 분석 시스템이 가져감

#### 3) ORB (Object Request Broker)
- 객체 지향 시스템에서 객체 및 서비스를 요청하고 전송할수 있도록 지원하는 미들웨어 
- 쉡게 말해 다른 서버의 객체를 내 객체처럼 사용 할 수 있도록 지원하는 미들웨어 (객체 기반 RPC)
- 대표 구현 기술 : CORBA, RMI
- 핵심 포인트
    - 객체 지향 분산 시스템
    - 서로 다른 언어로 만든 객체도 통신 가능 (java <> C++)
    - CPORBA (Common Object Request Broker Architecture)가 대표 표준
    - 요즘은 잘 안 씀 (MSA + REST/gRPC로 대체됨)

```
  // RPC: 원격 "함수" 호출
  getUserInfo(123)

  // ORB: 원격 "객체.메서드" 호출
  remoteUser.getName()
  remoteUser.getAge()
```

#### 4) DB 접속 미들웨어 = 데이터베이스 연결 전담
- 애플리케이션과 데이터베이스 서버를 연결해주는 미들웨어 
- 쉽게 말해 데이터베이스 연결을 중간에서 관리
- 핵심 포인트
    - DB 연결/해제 관리
    - 커넥션 풀링 (연결 미리 만들어두고 재사용)
    - 여러 종류 DB 통합 접근 가능 
    - 대표기술 : ODBC, JDBC

```
  [애플리케이션]
        │
        ▼
  [DB 미들웨어]  ← 연결 관리, 풀링, 변환
        │
        ▼
  [Oracle, MySQL, PostgreSQL...]
```
 대표 기술 비교
  |        | ODBC                 | JDBC                 |
  |--------|----------------------|----------------------|
  | 풀네임 | Open DB Connectivity | Java DB Connectivity |
  | 언어   | C/C++ 등 범용        | Java 전용            |
  | 특징   | MS에서 만든 표준     | Java 표준            |

#### 💡 실무 연결
```
  // JDBC 예시 (Java 개발자라면 익숙)
  Connection conn = DriverManager.getConnection(url, user, pw);
  Statement stmt = conn.createStatement();
  ResultSet rs = stmt.executeQuery("SELECT * FROM users");
```
##### 요즘 실무 
```

  [네가 쓰는 것]          [내부적으로 동작]

      JPA/Hibernate
           │
           ▼
      Spring Data JPA    ← 네가 쓰는 레이어
           │
           ▼
        HikariCP         ← 커넥션 풀 (자동 설정)
           │
           ▼
         JDBC            ← DB 미들웨어 (숨겨져 있음)
           │
           ▼
      MySQL Driver       ← application.yml에서 선택
           │
           ▼
         MySQL

Spring Boot에서 선택하는 부분
  # application.yml - 이거 설정하잖아
  spring:
    datasource:
      driver-class-name: com.mysql.cj.jdbc.Driver  # ← 여기서 선택!
      url: jdbc:mysql://localhost:3306/mydb        
```

#### 5) TP 모니터 (Transaction Processing Monitor)
- 분산 시스템의 애플리케이션을 지원하는 미들웨어로 트랜잭션 처리를 감시/제어
- 쉽게 말해 대량 트랜잭션을 안전하게 처리하는 관리자 
```
  [수천 명 동시 요청]
        │
        ▼
    [TP Monitor]  ← 트랜잭션 관리, 부하 분산, 장애 복구
        │
        ├── 트랜잭션 1 ✅
        ├── 트랜잭션 2 ✅
        ├── 트랜잭션 3 ❌ → 롤백!
        └── ...

```
- 핵심 포인트
    - ACID 보장(원자성, 일관성,고립성,지속성)
    - 대량 동시처리 (은행,항공 예약 등)
    - 장애 시 롤백/복구
    - 대표 기술 : Tuxedo, CICS,WebSphere, WebLogic

####  💡 실무 비유
 은행 ATM 시스템
  1. 출금 요청 들어옴
  2. 잔액 확인 → 출금 처리 → 잔액 갱신
  3. 중간에 오류? → 전체 롤백 (돈 안 빠짐)

  이걸 수천 명이 동시에 해도 꼬이지 않게 관리
  = TP Monitor

  DB 미들웨어 vs TP Monitor
  |      | DB 미들웨어 | TP Monitor       |
  |------|-------------|------------------|
  | 역할 | DB 연결     | 트랜잭션 관리    |
  | 초점 | 접속/풀링   | ACID/동시성/복구 |
  | 대표 | JDBC, ODBC  | Tuxedo, CICS     |

## 분석 모델 확인